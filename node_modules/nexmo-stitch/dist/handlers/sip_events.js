const logger = require('loglevel');

/**
 * Handle sip Events
 *
 * @class SipEventHandler
  */
class SipEventHandler {
	constructor(application) {
		this.log = logger.getLogger(this.constructor.name);
		this.application = application;
	}

	/**
	 * Entry point for sip events
	 * The event belongs to a call Object
	 * @private
	 */
	_handleSipCallEvent(event) {
		if (!this.application.calls.has(event.cid)) {
			this.log.warn('There is no call object for this Conversation id.');
			return;
		}
		const event_call = this.application.calls.get(event.cid);
		switch (event.type) {
			case 'sip:ringing':
			case 'sip:hangup':
				event_call._handleStateChange(event);
				break;
			default:
				break;
		}
	}

}

module.exports = SipEventHandler;
